# 小蚁搬运API测试套件

本项目包含一套完整的API测试工具，用于验证前后端的一致性、登录流畅性和整体连通性。

## 测试套件组成

1. **连通性测试** - 验证API服务器基本连通性
2. **登录流程测试** - 验证用户注册、登录、认证流程
3. **完整API测试套件** - 验证所有API端点的功能
4. **测试报告生成器** - 生成详细的HTML测试报告

## 运行测试

### 方法1: 运行完整测试套件
```bash
npm run test
```

### 方法2: 运行单个测试
```bash
# 连通性测试
npm run test-connectivity

# 登录流程测试
npm run test-login

# 完整API测试
npm run test-api
```

### 方法3: 直接运行脚本
```bash
./run-tests.sh
```

## 测试配置

测试使用以下环境变量（可以在 `.env` 文件中配置）：

```bash
# API基础URL
API_BASE_URL=http://localhost:3000/api

# 租户代码
TEST_TENANT_CODE=test_tenant
```

## 测试内容

### 认证相关测试
- 用户注册
- 用户登录
- 获取当前用户信息
- 修改密码
- Token验证

### 订单相关测试
- 创建订单
- 获取订单列表
- 获取订单详情
- 订单状态变更

### 财务管理测试
- 获取账户信息
- 获取支付记录
- 申请提现

### 推荐拉新测试
- 获取推荐活动
- 生成推荐链接
- 获取推荐统计
- 获取奖励信息

## 测试报告

测试完成后会生成详细的HTML报告，位于项目根目录的 `test-report.html` 文件中。

## 注意事项

1. 确保后端服务正在运行（默认端口3000）
2. 确保数据库连接正常
3. 部分测试会创建临时数据，测试完成后会保留用于验证
4. 如需清理测试数据，请手动删除测试期间创建的用户和订单